# 研究室クラスターのファイルやデータについて

:bulb: データの保存場所や運用方法については慣れが必要ですので、以下の説明をよく読んで利用してください。

## ファイルやデータの保存と運用

### はじめに

- :warning: 研究室クラスターの多くはファイルやデータを一時的にしか保持しません。
- なくなると困るファイルやデータは以下の場所に保存しましょう。
  - 研究室PCの[SynologyDriveフォルダ](../pc-synologydrive.md)
    - 研究室サーバと同期・バックアップされる
    - 例：プログラムや研究室PCのHDDに収まる容量のデータなど
  - JupyterNotebook内
    - `playground\projects`
    - 上記フォルダ内に適当なプロジェクトフォルダ（例：`sample-project`）を作成し、関連ファイルを保存
      - プロジェクトフォルダの作成方法は「playgroundフォルダの使い方」を参照
- Notebookからアクセス可能なフォルダの説明
  - `playground`: 書き込み可・永続保存・プロジェクト用
  - `shared`: 書き込み不可・永続保存・共有データ用
  - `work`: 一時保存（利用は推奨しません）

### ファイルやデータの運用方法

:bulb: お勧めの運用方法は以下の通りです。

- 研究室PCの[SynologyDriveフォルダ](../pc-synologydrive.md)にプロジェクト用フォルダを作成
- プロジェクトフォルダを[VSCode](../pc-vscode.md)で開く
- [研究室クラスターの使い方](README.md)の手順に沿って、Notebookサーバを起動し、研究室PCのVSCodeと接続
- プログラムや設定ファイルなどは研究室PCで作成・編集保存
- 公開されているデータやコーパスなどは`shared`フォルダにあるものを使う
  - なければ指導教員にデータ取得と`shared`フォルダへの配置を依頼
- プログラムはVSCodeから実行→研究室サーバで処理
- プログラムの出力先は、`playground`内に作成したプロジェクトフォルダに指定

### `playground`フォルダの使い方

- `playground`フォルダは研究室メンバーが誰でも書き込みできます
  - :warning: 他人が作成したフォルダを上書きすることも可能です
- まずはWeb版[Synology Drive](http://isr9.slis.tsukuba.ac.jp:5000/?launchApp=SYNO.SDS.Drive.Application)経由で自分のプロジェクト用フォルダをチームフォルダ > `k8s_playground` > `projects`の下に作成し、そのフォルダのみにデータの書き出しを行うようにしてください
- 研究室サーバの容量は巨大ですので、**基本的に一度作成したデータは削除しないでください**
  - そうすれば他人のデータを削除する過ちを回避できます

### 大きなファイルの`playground`へのアップロード方法

開発や実験で大きなファイルを入力に使用する場合があると思いますが、20MBを超える大きさのファイルは、JupyterHubに直接アップロードすることができません。その場合は、Web版Synology Driveのプロジェクトフォルダにアップロードしてみてください。
